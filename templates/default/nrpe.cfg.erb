# Autogenerated by Chef.

pid_file=<%= node['nagios']['nrpe']['pidfile'] %>
server_port=5666
nrpe_user=<%= node['nagios']['user'] %>
nrpe_group=<%= node['nagios']['group'] %>
dont_blame_nrpe=<%= node['nagios']['nrpe']['dont_blame_nrpe'] %>
debug=0
command_timeout=<%= node['nagios']['nrpe']['command_timeout'] %>
allowed_hosts=<%= @mon_host.join(',') %>
include_dir=<%= @nrpe_directory %>

command[check_zombie_procs]=<%= node['nagios']['plugin_dir'] %>/check_procs -w 5 -c 10 -s Z
command[check_total_procs]=<%= node['nagios']['plugin_dir'] %>/check_procs -w 500 -c 800
command[check_swap]=<%= node['nagios']['plugin_dir'] %>/check_swap -w '50%' -c '25%'
command[check_mem]=<%= node['nagios']['plugin_dir'] %>/check_mem.sh -w <%= node['nagios']['checks']['memory']['warning'] %> -c <%= node['nagios']['checks']['memory']['critical'] %> -p
command[check_chef_client]=<%= node['nagios']['plugin_dir'] %>/check_procs -w 1:2 -c 1:2 -C chef-client
command[check_smtp]=<%= node['nagios']['plugin_dir'] %>/check_smtp -H <%= node['nagios']['checks']['smtp_host'] %>
command[check_nginx]=<%= node['nagios']['plugin_dir'] %>/check_procs -w 2:3 -c 1:5 -C nginx
command[check_sphinx]=<%= node['nagios']['plugin_dir'] %>/check_procs -c 1:1 -C searchd
<% unless node['mysql'].nil? -%>
command[check_mysql_server]=<%= node['nagios']['plugin_dir'] %>/check_mysql -H localhost -u debian-sys-maint -p <%= node['mysql']['server_debian_password'] %>
<% end -%>
command[check_logfiles]=/usr/lib/nagios/plugins/check-log-new.pl -l <%= node['nagios']['logfiles']['log_file'] %> -r 0 -s <%= node['nagios']['checks']['pattern'] %>
command[check_openvpn]=<%= node['nagios']['plugin_dir'] %>/check_procs -c 1:1 -C openvpn
command[check_dnsmasq]=<%= node['nagios']['plugin_dir'] %>/check_procs -c 1:1 -C dnsmasq
command[check_mongod]=<%= node['nagios']['plugin_dir'] %>/check_procs -c 1:1 -C mongod
command[check_rsyslog]=<%= node['nagios']['plugin_dir'] %>/check_procs -c 1:1 -C rsyslogd
command[check_rabbitmq_epmd]=<%= node['nagios']['plugin_dir'] %>/check_procs -c 1:1 -C epmd
command[check_rabbitmq_beam]=<%= node['nagios']['plugin_dir'] %>/check_procs -c 1:2 -C beam
command[check_rabbitmq_server]=<%= node['nagios']['plugin_dir'] %>/check_procs -a "/usr/sbin/rabbitmq-server"
command[check_s2s_tag_processor_perl]=<%= node['nagios']['plugin_dir'] %>/check_procs -a "./s2s_tag_processor.pl"
command[check_s2s_http_perl]=<%= node['nagios']['plugin_dir'] %>/check_procs -a "./s2s_http.pl"
command[check_s2s_tagger_perl]=<%= node['nagios']['plugin_dir'] %>/check_procs -a "./s2s_tagger.pl"

command[check_ntp]=<%= node['nagios']['plugin_dir'] %>/check_ntp_time -H pool.ntp.org -w 1.5 -c 3

#command[check_unicorn]=<%= node['nagios']['plugin_dir'] %>/check_procs -c 4:8 -C unicorn_rails
#
# memcached checks require cpan modules, "Cache::Memcached" and "Nagios::Plugins::Memcached"
#command[check_memcached_response]=/usr/local/bin/check_memcached -H <%= node["ipaddress"] %> -w 3 -c 5
#command[check_memcached_size]=/usr/local/bin/check_memcached -H <%= node["ipaddress"] %> --size-warning 60 --size-critical 80
#command[check_memcached_hit]=/usr/local/bin/check_memcached -H <%= node["ipaddress"] %> --hit-warning 40 --hit-critical 20
